<% layout("layouts/boilerplate") -%>

<body>
    <h3>Listing details</h3>
    <div  class="card  offset-3">
        <h1><%= listingdetails.title %></h1>
    <img  style="border-radius: 4%;height:400px;width:50%"  src="<%= listingdetails.img.url %>"alt="image">
    <p>Owner: <%= listingdetails.owner.username %></p>
    <p>â‚¨.<%= listingdetails.price.toLocaleString("en-PK") %></p>
    <p>Description:<%= listingdetails.description %></p>
    <p>Location:<%= listingdetails.country %></p>
    <% if (currentuser && currentuser._id.equals(listingdetails.owner._id)) { %>
    <div   style="display: flex;gap: 60px;">
<form action="/listings/<%= listingdetails._id %>/edit" method="get"> <button  class="btn btn-danger">Edit </button></form>
    <form action="/listings/<%= listingdetails._id %>/delete?_method=DELETE" method="post"><button class="btn btn-danger"  >Delete</button>
    </form>
    </div>
  <% } %>  
</div>
<hr>

<div   class="reviews  offset-3" style="margin-top: 30px;">
    <h3>give your reviews please</h3>
    <form action="/reviews/create/<%= listingdetails._id %>" method="post">
        
        <fieldset class="starability-basic">
  <legend>Rating:</legend>
  <input type="radio" id="no-rate" class="input-no-rate" name="rating" value="0" checked aria-label="No rating." />
  <input type="radio" id="first-rate1" name="rating" value="1" />
  <label for="first-rate1" title="Terrible">1 star</label>
  <input type="radio" id="first-rate2" name="rating" value="2" />
  <label for="first-rate2" title="Not good">2 stars</label>
  <input type="radio" id="first-rate3" name="rating" value="3" />
  <label for="first-rate3" title="Average">3 stars</label>
  <input type="radio" id="first-rate4" name="rating" value="4" />
  <label for="first-rate4" title="Very good">4 stars</label>
  <input type="radio" id="first-rate5" name="rating" value="5" />
  <label for="first-rate5" title="Amazing">5 stars</label>
</fieldset>
        <br>
        <label class="form-lable" for="comment">Comment:</label>
        <textarea  class="form-control"  name="comment" id="" cols="20" rows="5"></textarea>
        <br>

        <button class="btn btn-outline-danger">Submit Review</button>
    </form>
</div>

<h3>All reviewes</h3>

<div class="reveiws row "   >
<% listingdetails.reviews.forEach(review => { %>
    <div class="col-4  card mb-3 ">
    <p>Rating: <%= review.rating %></p>
  <p class="starability-result" data-rating="<%= review.rating %>">
    Rated: 3 stars
  </p>
    <p>Comment: <%= review.comment %></p>
    <form  method="post"  action="/listings/<%= listingdetails._id %>/reviews/<%= review._id %>?_method=Delete"> <button  class="btn btn-small btn-dark" >Delete</button></form>
    </div>
<% }); %>

</div>


   
</body>